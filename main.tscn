[gd_scene load_steps=6 format=2]

[ext_resource path="res://Nodes/SlideBox.tscn" type="PackedScene" id=1]
[ext_resource path="res://Nodes/Player.tscn" type="PackedScene" id=2]
[ext_resource path="res://LD/Level1Bg.png" type="Texture" id=4]

[sub_resource type="Shader" id=3]
code = "shader_type canvas_item;

uniform float alpha = 1.0;
uniform float inner_radius = 0.0;
uniform float outer_radius = 1.0;

float circle(vec2 position, float radius, float feather)
{
	return smoothstep(radius, radius + feather, length(position - vec2(0.5)));
}


void fragment() {
	vec4 tex = texture(TEXTURE, UV);
	
	//COLOR = tex - vec4(0,0,0,0.1);
	COLOR = vec4(tex.rgb, circle(UV, 0.55, -0.2));
	
	//float x = abs(UV.r-.5)*2.0;
	//float y = abs(UV.g-.5)*2.0;
	//float q = 1.0-(1.0-sqrt(x*x+y*y)/outer_radius)/(1.0-inner_radius);
	//COLOR = vec4(0, 0, 0, q*alpha);
}"

[sub_resource type="ShaderMaterial" id=2]
shader = SubResource( 3 )
shader_param/alpha = 1.0
shader_param/inner_radius = 0.0
shader_param/outer_radius = 1.0

[node name="Main" type="Node2D"]

[node name="Level1Bg" type="Sprite" parent="."]
material = SubResource( 2 )
position = Vector2( 995, -200 )
scale = Vector2( 0.70463, 0.70463 )
texture = ExtResource( 4 )

[node name="StaticBody2D" type="StaticBody2D" parent="."]
visible = false

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="StaticBody2D"]
polygon = PoolVector2Array( -500, -682, 2483, -702, 2428, -141, 2188, -139, 2185, -374, 2011, -349, 1992, -396, 1412, -413, 1396, -317, 1282, -313, 1275, -258, 1214, -233, 1042, -251, 1021, -290, 823, -294, 799, -422, 36, -400, -362, -382, -360, 136, -48, 136, -48, 56, 184, 56, 184, 128, 664, 128, 664, -48, 1032, -48, 1040, -136, 1256, -136, 1256, -48, 2104, -48, 2104, 24, 2192, 24, 2192, -64, 2424, -64, 2419, 263, -653, 282 )

[node name="Player" parent="." instance=ExtResource( 2 )]
position = Vector2( -317, 83 )
speed = 500
jump_speed = -1000
friction = 0.5

[node name="SlideBox" parent="." instance=ExtResource( 1 )]
position = Vector2( 438, 79 )

[node name="SlideBox2" parent="." instance=ExtResource( 1 )]
position = Vector2( 2148, -21 )
